<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/article_read_page/styles.css" />
    <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.bubble.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="menu">
      <div class="top">
        <div class="side-menu">
          <svg
            width="17"
            height="2"
            viewBox="0 0 17 2"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <line
              y1="0.75"
              x2="17"
              y2="0.75"
              stroke="black"
              stroke-width="1.5"
            />
          </svg>

          <svg
            width="17"
            height="2"
            viewBox="0 0 17 2"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <line
              y1="0.75"
              x2="17"
              y2="0.75"
              stroke="black"
              stroke-width="1.5"
            />
          </svg>

          <svg
            width="17"
            height="2"
            viewBox="0 0 17 2"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <line
              y1="0.75"
              x2="17"
              y2="0.75"
              stroke="black"
              stroke-width="1.5"
            />
          </svg>
        </div>

        <div class="central-menu">
          <div class="list">
            <div class="word">Популярне</div>
            <div class="word">Про музику</div>
            <div class="word">Спорт</div>
          </div>

          <div class="logo">
            <svg
              width="91"
              height="29"
              viewBox="0 0 91 29"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1.312 9.504C1.312 3.936 6.336 0.735998 15.072 0.735998C23.968 0.735998 28.864 4.064 28.864 10.176H20.288C20.288 7.968 17.984 6.88 14.688 6.88C11.52 6.88 9.792 7.904 9.792 9.408C9.792 11.04 12.032 11.36 14.688 11.552C20.864 12.032 29.312 11.872 29.312 18.976C29.312 25.28 24.416 28.384 15.36 28.384C5.856 28.384 0.96 24.96 0.96 18.816H9.568C9.568 21.088 11.712 22.24 15.904 22.24C19.232 22.24 20.8 21.504 20.8 20.032C20.8 18.08 18.08 17.792 14.56 17.568C8.96 17.216 1.312 17.024 1.312 9.504ZM32.2013 28V1.12H49.9933C56.4253 1.12 60.6173 4.416 60.6173 9.44C60.6173 13.152 58.3453 15.904 55.0173 16.672C56.3933 17.376 57.4813 18.368 58.1853 19.712L62.4733 28H53.3533L49.6733 20.832C48.8733 19.296 47.9773 18.912 45.0653 18.912H40.6493V28H32.2013ZM40.6493 13.344H48.5853C50.8893 13.344 52.1693 12.384 52.1693 10.656C52.1693 8.992 50.8253 8.032 48.5853 8.032H40.6493V13.344ZM65.3575 28V1.12H90.5415V7.84H73.8055V12.064H87.7255V18.016H73.8055V28H65.3575Z"
                fill="black"
              />
            </svg>
          </div>

          <div class="list">
            <div class="word">Ігри</div>
            <div class="word">Фільми й серіали</div>
            <div class="word">Новинки</div>
          </div>
        </div>

        <div class="search-icon">
          <svg
            width="22"
            height="21"
            viewBox="0 0 22 21"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle
              cx="10.0092"
              cy="10.5"
              r="8.25"
              transform="rotate(-6.8503 10.0092 10.5)"
              stroke="black"
              stroke-width="1.5"
            />
            <line
              x1="16.5396"
              y1="15.9697"
              x2="20.5396"
              y2="19.9697"
              stroke="black"
              stroke-width="1.5"
            />
          </svg>
        </div>
      </div>

      <div class="buttom">
        <div class="line">
          <svg
            width="100%"
            height="2"
            viewBox="0 0 2234 2"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <line
              x1="0"
              y1="1.25"
              x2="100%"
              y2="1.25012"
              stroke="black"
              stroke-width="2.5"
            />
          </svg>
        </div>

        <div class="list">
          <a href="/"
            ><div class="red-border selected-category">Новинки</div></a
          >
          <a href="/category_page/weather"
            ><div class="red-border">Погода</div></a
          >
          <a href="/category_page/anime"><div class="red-border">Аніме</div></a>
          <a href="/category_page/science"
            ><div class="red-border">Наука</div></a
          >
          <a href="/category_page/it"
            ><div class="red-border">Інформаційні технологїї</div></a
          >
          <a href="/category_page/community"
            ><div class="red-border">Суспільство</div></a
          >
          <a href="/category_page/self-education"
            ><div class="red-border">Самоосвіта</div></a
          >
          <a href="/category_page/health"
            ><div class="red-border">Здоровʼє</div></a
          >
          <a href="/category_page/culture"
            ><div class="red-border">Культура</div></a
          >
          <a href="/category_page/all"><div class="red-border">Усі</div></a>
        </div>
      </div>
    </div>

    <div id="article-container" style="margin-top: 50px">
      <h1 id="article-title"></h1>
      <br />
      <div class="article-info">
        <p id="release-date" style="margin-bottom: 20px"></p>
        <div
          style="
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
          "
        >
          <img
            id="preview-image"
            src="{{ imageLink }}"
            alt="Preview Image"
            style="width: 60vw; margin-bottom: 0px"
          />
        </div>
      </div>

      <div id="article-content"></div>
      <div>
        <h3>Ключові слова</h3>
        <ul id="keywords-list"></ul>
      </div>
      <br />
      <div>
        <h3>Категорії</h3>
        <ul id="categories-list"></ul>
      </div>
      <br />
      <div>
        <h3>Теги</h3>
        <ul id="tags-list"></ul>
      </div>
    </div>

    <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <script>
      const currentUrl = window.location.href;
      const articleId = currentUrl.split("/").pop();

      const articleJsonLink = `/admin/get_json_of_article/${articleId}`;

      function renderQuillContent(contentJson, containerId) {
        const container = document.getElementById(containerId);
        const parsedContent = JSON.parse(contentJson);

        const quill = new Quill(container, {
          theme: "bubble",
          readOnly: true,
          modules: {
            toolbar: false,
          },
        });

        quill.setContents(parsedContent);
      }

      fetch(articleJsonLink)
        .then((response) => {
          if (!response.ok) {
            alert("Failed of request article data");
          }
          return response.json();
        })
        .then((data) => {
          document.getElementById("article-title").textContent =
            data.title || "No title provided";
          document.getElementById(
            "release-date"
          ).textContent = `Дата публікації: ${data.release_date || "N/A"}`;
          document.getElementById("preview-image").src =
            "/images/" + data.slug || "";

          renderQuillContent(data.content, "article-content");

          const keywordsList = document.getElementById("keywords-list");
          data.keywords.forEach((keyword) => {
            const li = document.createElement("li");
            li.textContent = keyword;
            keywordsList.appendChild(li);
          });

          const categoriesList = document.getElementById("categories-list");
          data.categories.forEach((category) => {
            const li = document.createElement("li");
            li.textContent = category;
            categoriesList.appendChild(li);
          });

          const tagsList = document.getElementById("tags-list");
          data.tags.forEach((tag) => {
            const li = document.createElement("li");
            li.textContent = tag;
            tagsList.appendChild(li);
          });
        })
        .catch((error) => {
          console.error("Error fetching article data:", error);
          document.getElementById("article-container").textContent =
            "Failed to load article information.";
        });
    </script>
  </body>
</html>
